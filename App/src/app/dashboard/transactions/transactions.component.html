<dashboard-header [accountID]="accountID"></dashboard-header>
<dashboard-charts [accountID]="accountID"></dashboard-charts>


<div class="row">
	<div class="col-md-9">
		<div class="card">
			<div class="header">
				<h4 class="title">Transactions</h4>
				<!--<p class="category">Here is a subtitle for this table</p>-->
			</div>


			<div class="content table-responsive ">

				<div class="row">
					<div class="col-md-6">
						<form class="form-inline" #searchForm="ngForm" style="margin-left:5px; margin-bottom:10px;">
							<fieldset>
								<input type="text" [(ngModel)]="search" name="search" class="form-control" placeholder="Search..." style="height: 35px;">
								<button type="button" class="btn btn-primary" (click)="Search()"><i class="fa fa-search"></i>Search</button>
							</fieldset>

						</form>
					</div>
					<div class="col-md-6">
						<button type="button" class="btn btn-default pull-right" style="margin-right:15px" (click)="ImportFile()"><i class="fa fa-upload"></i>Import File</button>
					</div>
				</div>

				<br>

				<table class="table table-over">
					<thead>
						<th width="150px">Date</th>
						<th width="100px">Type</th>
						<th>Description</th>
						<th width="150px">Balance</th>
						<th width="200px">Tag</th>
						<th width="50px"></th>
					</thead>
					<tbody>
						<tr *ngFor="let transaction of transactions | paginate: { id: 'server', itemsPerPage: itemsPerPage, currentPage: page, totalItems: total }">
							<td>{{transaction.TransactionDate | date}}</td>
							<td>{{transaction.TransactionType}}</td>
							<td>{{transaction.Description}}</td>
							<td><strong [className]="transaction.Balance > 0 ? 'text-success' : 'text-warning'">Â£ {{transaction.Balance }}</strong></td>
							<td>
								<ng2-completer [(ngModel)]="transaction.Tag" inputClass="form-control input-sm" [datasource]="tags" [minSearchLength]="0"
								 (blur)="onTagChanged(transaction)"></ng2-completer>
							</td>
							<th>
								<!--<button class="btn btn-link" *ngIf="!transaction.Tag" (click)=addTag(transaction)><i class="fa fa-tags" aria-hidden="true"> </i>Create Tag</button>-->
								<button class="btn btn-sm btn-success btn-icon" *ngIf="!transaction.Tag" (click)=addTag(transaction)
								data-toggle="tooltip" data-placement="bottom" title="Add Tag"><i class="fa fa-tags"></i></button>
							</th>
						</tr>

					</tbody>
				</table>
				<div class="has-text-centered">
					<div class="spinner" [ngClass]="{ 'hidden': !loading }"></div>
					<pagination-controls (pageChange)="getPage($event)" id="server" class="pagination pagination-info"></pagination-controls>
				</div>


			</div>

		</div>

	</div>

	<div class="col-md-3">

		<div class="card">
			<div class="bs-example bs-example-tabs" data-example-id="togglable-tabs">
				<ul class="nav nav-tabs nav-justified" id="myTabs" role="tablist">
					<li role="presentation" class="active">
						<a href="#tags" id="tags-tab" role="tab" data-toggle="tab" aria-controls="tags" aria-expanded="true">Tags</a>
					</li>
					<li role="presentation" class="">
						<a href="#files" role="tab" id="files-tab" data-toggle="tab" aria-controls="files" aria-expanded="false">Files</a>
					</li>

				</ul>

				<div class="tab-content" id="myTabContent">
					<div class="tab-pane fade active in" role="tabpanel" id="tags" aria-labelledby="tags-tab">
						<dashboard-tags [accountID]="accountID"></dashboard-tags>
					</div>
					<div class="tab-pane fade" role="tabpanel" id="files" aria-labelledby="files-tab">
						<dashboard-files [accountID]="accountID"></dashboard-files>
					</div>


				</div>
			</div>

		</div>



	</div>
</div>