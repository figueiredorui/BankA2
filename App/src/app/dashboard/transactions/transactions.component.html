<dashboard-header [accountID]="accountID"></dashboard-header>
<dashboard-charts [accountID]="accountID"></dashboard-charts>

<br>
<br>


		
<div class="row" >

	<div class="col-md-9">
		<div [ngBusy]="isBusy"></div>
		<div class="panel">
			<div class="panel-heading">
				<h4 class="title">Transactions</h4>
				<!--<p class="category">Here is a subtitle for this table</p>-->
			</div>
			<div class="panel-body " style="height:1150px;">
				<div class="row">
					<div class="col-md-6">
						<form class="form-inline" #searchForm="ngForm">
							<div class="input-group">
								<input type="text" [(ngModel)]="search" name="search" class="form-control" placeholder="Search...">
								<span class="input-group-btn">
									<button type="button" class="btn btn-primary" (click)="Search()"><i class="fa fa-search"></i> Search</button>
								</span>
							</div>
							<!-- /input-group -->
						</form>
					</div>
					<div class="col-md-6">
						<button type="button" class="btn btn-success pull-right" (click)="ImportFile()"><i class="fa fa-upload"></i> Import File</button>
					</div>
				</div>

				<br>

				<table class="table table-over">
					<thead>
						<th width="150px">Date</th>
						<th width="100px">Type</th>
						<th>Description</th>
						<th width="150px">Amount</th>
						<th width="200px">Tag</th>
						<th width="50px"></th>
					</thead>
					<tbody>
						<tr *ngFor="let transaction of transactions | paginate: { id: 'server', itemsPerPage: itemsPerPage, currentPage: page, totalItems: total }">
							<td>{{transaction.TransactionDate | date}}</td>
							<td>{{transaction.TransactionType}}</td>
							<td>{{transaction.Description}}</td>
							<td><strong [className]="transaction.Balance > 0 ? 'text-success' : 'text-warning'">Â£ {{transaction.Balance }}</strong></td>
							<td>
								<ng2-completer [(ngModel)]="transaction.Tag" inputClass="form-control input-sm" [datasource]="tags" [minSearchLength]="0"
								 (blur)="onTagChanged(transaction)"></ng2-completer>
							</td>
							<th>
								<button class="btn btn-link" *ngIf="!transaction.Tag" (click)=addTag(transaction) data-toggle="tooltip" data-placement="bottom"
								 title="Add Tag"><i class="fa fa-tags"></i></button>
							</th>
						</tr>
					</tbody>
				</table>
				<div class="has-text-centered">
					<div class="spinner" [ngClass]="{ 'hidden': !loading }"></div>
					<pagination-controls (pageChange)="getPage($event)" id="server" class="pagination pagination-info"></pagination-controls>
				</div>
			</div>
		</div>
	</div>

	<div class="col-md-3">
		<div class="panel">
			<ul class="nav nav-tabs nav-justified" id="myTabs" role="tablist">
				<li role="presentation" class="active">
					<a href="#tags" id="tags-tab" role="tab" data-toggle="tab" aria-controls="tags" aria-expanded="true">Tags</a>
				</li>
				<li role="presentation" class="">
					<a href="#files" role="tab" id="files-tab" data-toggle="tab" aria-controls="files" aria-expanded="false">Files</a>
				</li>
			</ul>
			<div class="tab-content" id="myTabContent">
				<div class="tab-pane fade active in" role="tabpanel" id="tags" aria-labelledby="tags-tab" style="height:1170px; overflow-y: scroll;">
					<dashboard-tags [accountID]="accountID"></dashboard-tags>
				</div>
				<div class="tab-pane fade" role="tabpanel" id="files" aria-labelledby="files-tab" style="height:1170px; overflow-y: scroll;">
					<dashboard-files [accountID]="accountID"></dashboard-files>
				</div>
			</div>
		</div>
	</div>
</div>
